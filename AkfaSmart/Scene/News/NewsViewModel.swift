//
//  NewsViewModel.swift
//  AkfaSmart
//
//  Created by Temur on 05/02/2024.
//  Copyright ¬© 2024 Tuan Truong. All rights reserved.
//

import Combine
struct NewsViewModel {
    let navigator: NewsNavigatorType
}

extension NewsViewModel: ViewModel {
    struct Input {
        let selectEventTrigger: Driver<NewsItemViewModel>
    }
    
    final class Output: ObservableObject {
        @Published var news = [
            NewsItemViewModel(id: 1, date: "2023-10-08T19:00:00.000+00:00".convertToDateUS(), title: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", shortContent: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", htmlContent: "<h2>Termo –†–æ–º–ª–∞—Ä–∏ —É—á—É–Ω &nbsp;<br>IMPAK –ò–∫–∫–∏ —ë–∫–ª–∞–º–∞–ª–∏ –æ—á–∏–ª–∏—à –º–µ—Ö–∞–Ω–∏–∑–º–∏<br>+ —Ä—É—á–∫–∞—Å–∏</h2><h2>–°–∏–∑ –∏—Å—Ç–∞–≥–∞–Ω —É–ª—á–∞–º–ª–∞—Ä–¥–∞!!!<br>–£–ª–≥—É—Ä–∏–± –∫–æ–ª–∏–Ω–≥, –ù–∞—Ä—Ö–ª–∞—Ä–∏ –ê–∂–æ–π–∏–± –≤–∞ –•–∞–º—ë–Ω–±–æ–øüîä</h2><h3>–ë–∞—Ä—á–∞ AKFA –†–∞—Å–º–∏–π –¥–∏–ª–µ—Ä–ª–∞—Ä–∏–¥–∞–Ω —Å—É—Ä–∞–Ω–≥ ü§ù</h3><h3>+99877 777 73 84 - Abrorxo‚Äôja<br>+99899 941 00 71 - Azamat<br>+99897 414 14 34 - Abdulloh</h3>", imageUrl: "https://picsum.photos/350/200"),
            NewsItemViewModel(id: 2, date: "2023-10-08T19:00:00.000+00:00".convertToDateUS(), title: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", shortContent: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", htmlContent: "<h3>AKFA Plast –∫–æ—Ä—Ö–æ–Ω–∞—Å–∏–¥–∞ —è–Ω–≥–∏ —Ç—É—Ä–¥–∞–≥–∏ 6500 Penta —Å–µ—Ä–∏—è–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –º–∞—Ö—Å—É–ª–æ—Ç–∏ –∏—à–ª–∞–± —á–∏“õ–∞—Ä–∏–ª–∏—à–∏ –π—û–ª–≥–∞ “õ—û–π–∏–ª–¥–∏. –ü—Ä–æ—Ñ–∏–ª–Ω–∏–Ω–≥ –º–æ–Ω—Ç–∞–∂ “õ–∞–ª–∏–Ω–ª–∏–≥–∏ 65 –º–º —ç–≥–∞ —É—à–±—É –ø—Ä–æ—Ñ–∏–ª–Ω–∏–Ω–≥ 5 —Ç–∞ –∫–∞–º–µ—Ä–∞ “õ–∞—Ç–ª–∞–º–∏ –º–∞–≤–∂—É–¥ –±—û–ª–∏–±, —à–æ–≤“õ–∏–Ω –≤–∞ –∏—Å—Å–∏“õ–ª–∏–∫ —û—Ç–∫–∞–∑–º–∞—Å–ª–∏–∫ —Ö—É—Å—É—Å–∏—è—Ç–∏ —é“õ–æ—Ä–∏ —Ö–∏—Å–æ–±–ª–∞–Ω–∞–¥–∏. &nbsp;–£–Ω–¥–∞–Ω —ç—à–∏–∫ –≤–∞ —Ä–æ–º–ª–∞—Ä —è—Å–∞—à–¥–∞ 13 –º–º –ê–ö–° —Å–∏—Å—Ç–µ–º–∞—Å–∏–¥–∞–≥–∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä–ª–∞—Ä–∏–¥–∞–Ω —Ñ–æ–π–¥–∞–ª–∞–Ω–∏–ª–∞–¥–∏.</h3><h3>–ë—É–≥—É–Ω–≥–∏ –∫—É–Ω–¥–∞ –∫–æ—Ä—Ö–æ–Ω–∞–¥–∞ –ø—Ä–æ—Ñ–∏–ª–ª–∞—Ä–Ω–∏–Ω–≥ 10 –¥–∞–Ω –æ—Ä—Ç–∏“õ —Å–µ—Ä–∏—è–ª–∞—Ä–∏ –∏—à–ª–∞–± —á–∏“õ–∞—Ä–∏–ª–∞—ë—Ç–≥–∞–Ω –±—û–ª–∏–±, —è–Ω–≥–∏ –º–∞“≥—Å—É–ª–æ—Ç —É–Ω–≥–∞ –±—û–ª–≥–∞–Ω —Ç–∞–ª–∞–±–¥–∞–Ω –∫–µ–ª–∏–± —á–∏“õ–∏–±, –∏—à–ª–∞–± —á–∏“õ–∞—Ä–∏–ª–∏—à–∏ –±–æ—à–ª–∞–Ω–¥–∏ “≥–∞–º–¥–∞ —É “≥–æ–∑–∏—Ä–¥–∞–Ω–æ“õ —Ö–∞—Ä–∏–¥–æ—Ä–≥–∏—Ä –º–∞“≥—Å—É–ª–æ—Ç–≥–∞ –∞–π–ª–∞–Ω–¥–∏. –¢–∞—ä–∫–∏–¥–ª–∞—à –∂–æ–∏–∑, –±—É–≥—É–Ω–≥–∏ –∫—É–Ω–¥–∞ –∫–æ—Ä—Ö–æ–Ω–∞–¥–∞ —ç—à–∏–∫ –≤–∞ –¥–µ—Ä–∞–∑–∞ —Ä–æ–º–ª–∞—Ä–∏ “≥–∞–º–¥–∞ —Ñ–∞—Å–∞–¥ —Ç–∏–∑–∏–º–ª–∞—Ä–∏ —É—á—É–Ω –∑–∞—Ä—É—Ä —Ç—É—Ä–¥–∞–≥–∏ –ø—Ä–æ—Ñ–∏–ª–ª–∞—Ä —Ç–∞–π—ë—Ä–ª–∞–Ω–º–æ“õ–¥–∞ –≤–∞ –º–∏–∂–æ–∑–ª–∞—Ä —Ç–∞–ª–∞–±–∏ –∞—Å–æ—Å–∏–¥–∞ —Ç–∞–∫–æ–º–∏–ª–ª–∞—à—Ç–∏—Ä–∏–ª–º–æ“õ–¥–∞.</h3>", imageUrl: "http://84.54.75.248:1030/api/mobile/news/img/240e43d7-1408-4ae2-a669-07eb16d2719c_photo_2023-12-23_12-00-44.jpg"),
            NewsItemViewModel(id: 6, date: "2023-10-08T19:00:00.000+00:00".convertToDateUS(), title: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", shortContent: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", htmlContent: "", imageUrl: "http://84.54.75.248:1030/api/mobile/news/img/240e43d7-1408-4ae2-a669-07eb16d2719c_photo_2023-12-23_12-00-44.jpg"),
            NewsItemViewModel(id: 7, date: "2023-10-08T19:00:00.000+00:00".convertToDateUS(), title: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", shortContent: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", htmlContent: "", imageUrl: "http://84.54.75.248:1030/api/mobile/news/img/240e43d7-1408-4ae2-a669-07eb16d2719c_photo_2023-12-23_12-00-44.jpg"),
            NewsItemViewModel(id: 8, date: "2023-10-08T19:00:00.000+00:00".convertToDateUS(), title: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", shortContent: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", htmlContent: "", imageUrl: "http://84.54.75.248:1030/api/mobile/news/img/240e43d7-1408-4ae2-a669-07eb16d2719c_photo_2023-12-23_12-00-44.jpg"),
            NewsItemViewModel(id: 9, date: "2023-10-08T19:00:00.000+00:00".convertToDateUS(), title: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", shortContent: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", htmlContent: "", imageUrl: "http://84.54.75.248:1030/api/mobile/news/img/240e43d7-1408-4ae2-a669-07eb16d2719c_photo_2023-12-23_12-00-44.jpg"),
            NewsItemViewModel(id: 10, date: "2023-10-08T19:00:00.000+00:00".convertToDateUS(), title: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", shortContent: "–í—ã—Å—Ç–∞–≤–∫–∞ MosBuild (–ú–æ—Å–±–∏–ª–¥) 2023 –≥–¥–µ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É —Å—Ç–æ–∏—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å.", htmlContent: "", imageUrl: "http://84.54.75.248:1030/api/mobile/news/img/240e43d7-1408-4ae2-a669-07eb16d2719c_photo_2023-12-23_12-00-44.jpg"),
        ]
        @Published var isLoading = false
        @Published var isReloading = false
        @Published var isLoadingMore = false
        @Published var alert = AlertMessage()
        @Published var isEmpty = false
    }
    
    func transform(_ input: Input, cancelBag: CancelBag) -> Output {
        let output = Output()
        
        input.selectEventTrigger
            .sink { item in
                navigator.showDetail(item)
            }
            .store(in: cancelBag)
        
        return output
    }
}
